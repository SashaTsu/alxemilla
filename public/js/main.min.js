"scrollRestoration"in history&&(history.scrollRestoration="manual");import{auth as l,onAuthStateChanged as u}from"./firebase.js";import{changeLang as w}from"./locale.js";import{renderSidebar as i,renderProductList as o,showProduct as s,renderOrderForm as a,renderAbout as d}from"./views.min.js";function c(){window.scrollTo(0,0)}window.scrollToTop=c,window.renderProductList=o,window.showProduct=s,window.renderOrderForm=a,window.renderAbout=d,window.renderDelivery=renderDelivery,window.setLanguage=r=>{w(r),i();const e=window.currentView;if(!e){o(null,!1),c();return}switch(e.name){case"list":o(e.category,!1);break;case"product":s(e.id);break;case"order":a(e.id,e.size,e.color,e.preorder);break;case"about":d();break;default:o(null,!1)}c()};function f(){const r=document.getElementById("burger"),e=document.getElementById("sidebar");!r||!e||(r.addEventListener("click",t=>{t.stopPropagation(),e.classList.toggle("show")}),document.addEventListener("click",t=>{!e.contains(t.target)&&!r.contains(t.target)&&e.classList.remove("show")}),e.querySelectorAll("a").forEach(t=>t.addEventListener("click",()=>e.classList.remove("show"))))}function m(){i(),f(),u(l,r=>{i();const e=window.location.pathname,t=new URLSearchParams(window.location.search);if(e==="/admin"){const n=t.get("id");import("./admin.js").then(()=>{r?window.renderAdminForm(n):window.renderLogin()});return}if(e.startsWith("/product/")){s(e.split("/product/")[1]);return}if(e.startsWith("/order/")){const n=window.history.state||{};a(e.split("/order/")[1],n.size,n.color,n.preorder);return}if(e==="/about"){d();return}if(e==="/delivery"){window.renderDelivery();return}o(null,!1)}),window.addEventListener("popstate",r=>{i();const e=r.state;if(!e)return o(null,!1);switch(e.name){case"list":o(e.category,!1);break;case"product":s(e.id);break;case"order":a(e.id,e.size,e.color,e.preorder);break;case"about":d();break;case"delivery":window.renderDelivery();break;default:o(null,!1)}})}m();
