"scrollRestoration"in history&&(history.scrollRestoration="manual");import{auth,onAuthStateChanged}from"./firebase.js";import{t,changeLang}from"./locale.js";import{renderSidebar,renderProductList,showProduct,renderOrderForm,renderAbout}from"./views.min.js";function scrollToTop(){window.scrollTo(0,0)}function setupBurger(){const r=document.getElementById("burger"),e=document.getElementById("sidebar");r&&e&&(r.addEventListener("click",(r=>{r.stopPropagation(),e.classList.toggle("show")})),document.addEventListener("click",(o=>{e.contains(o.target)||r.contains(o.target)||e.classList.remove("show")})),e.querySelectorAll("a").forEach((r=>r.addEventListener("click",(()=>e.classList.remove("show"))))))}function init(){renderSidebar(),setupBurger(),onAuthStateChanged(auth,(r=>{renderSidebar();const e=window.location.pathname,o=new URLSearchParams(window.location.search);if("/admin"!==e)if(e.startsWith("/product/"))showProduct(e.split("/product/")[1]);else if(e.startsWith("/order/")){const r=window.history.state||{};renderOrderForm(e.split("/order/")[1],r.size,r.color,r.preorder)}else"/about"!==e?"/delivery"!==e?renderProductList(null,!1):window.renderDelivery():renderAbout();else{const e=o.get("id");import("./admin.js").then((()=>{r?window.renderAdminForm(e):window.renderLogin()}))}})),window.addEventListener("popstate",(r=>{renderSidebar();const e=r.state;if(!e)return renderProductList(null,!1);switch(e.name){case"list":renderProductList(e.category,!1);break;case"product":showProduct(e.id);break;case"order":renderOrderForm(e.id,e.size,e.color,e.preorder);break;case"about":renderAbout();break;case"delivery":window.renderDelivery();break;default:renderProductList(null,!1)}}))}window.scrollToTop=scrollToTop,window.renderProductList=renderProductList,window.showProduct=showProduct,window.renderOrderForm=renderOrderForm,window.renderAbout=renderAbout,window.renderDelivery=renderDelivery,window.setLanguage=r=>{changeLang(r),renderSidebar();const e=window.currentView;if(!e)return renderProductList(null,!1),void scrollToTop();switch(e.name){case"list":renderProductList(e.category,!1);break;case"product":showProduct(e.id);break;case"order":renderOrderForm(e.id,e.size,e.color,e.preorder);break;case"about":renderAbout();break;default:renderProductList(null,!1)}scrollToTop()},init();